extends layout

block content


    .container(style='width: 90%')
        .row
            h3 Sentiment Summary for '#{searchTerm}'
            .col.s3.card-panel(style='height: 23em')
                #gaugeChart
                br
                br
                if averageSentiment > 0
                    p Average Sentiment is <b style='color: green'>positive</b>
                else if averageSentiment < 0
                    p Average Sentiment is <b style='color: darkred'>negative</b>
                else
                    p Average Sentiment is <b style='color: grey'>neutral</b>
            .col.s6
                .card-panel(style='height: 23em')
                    p.absolute.grey-text(style='margin-top: -12px')
                        | Hover over a hexagon to read the associated Tweet.
                        | Sentiment is represented by color
                    #chart
            .col.s3.card-panel(style='height: 23em')
                h4.flow-text Top words used with <i>'#{searchTerm}'</i>
                    ol
                        for wordObject in data.keywordData
                            if wordObject.sentiment > 0
                                - var color = 'green'
                            else if wordObject.sentiment < 0
                                - var color = 'darkred'
                            else
                                - var color = 'dimgrey'
                            li
                                a(href='/search/#{wordObject.text}', style='color: #{color}; font-size: 1.1em;') #{wordObject.text}




        .row
            h3 Click on a link below to see the '#{searchTerm}' results data in another format
            each page in pages
                .col.s3
                    a(href='/#{page.page}/#{searchTerm}')
                        .card.home-card
                            .card-image.waves-effect.waves-block.waves-light
                                img(src='/images/thumbnails/thumb_#{page.index}.png')
                            .card-content
                                span.card-title.grey-text.text-darken-4= page.title


        .row
            h3 Make a new search
            .col.s6.offset-3.card-panel
                .input-field
                    input#txtKeyword.validate(type='text')
                    label(for='txtKeyword') Enter a keyword, topic, brand, celebrity or search term


block scripts
    script(type='text/javascript').
        var results = !{JSON.stringify(data.tweets)};
        var average = !{JSON.stringify(averageSentiment)};
        var searchTerm = !{JSON.stringify(searchTerm)};
    script(type = 'text/javascript', src = '/bower_components/d3/d3.min.js')
    script(type = 'text/javascript', src = '/bower_components/hexbin/index.js')
    script(type = 'text/javascript', src = '/bower_components/d3tip/index.js')
    script(type='text/javascript', src='/bower_components/c3/c3.min.js')
    script(type='text/javascript', src='/javascripts/search-summary.bundle.js')

